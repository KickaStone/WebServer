# 带外数据


例子展示了带外数据的接受。

和一般数据发送接受一样，设置不同flags参数即可。

还可以使用sockatmark检测socket数据是否有带外标记。

在例子中，出现了接受的数据只有一个字符的情况。

出现这种情况的原因是由于带外数据（Out-of-Band Data，OOB）在TCP中通常只支持发送一个字节的数据。TCP协议中的OOB数据实际上是通过“紧急指针”来指示的，而不是通过单独的通道传递。因此，这种机制只允许一个字节的带外数据被标记为紧急数据。

在你的程序中，当检测到带外数据时，recv 函数使用 MSG_OOB 标志来接收它。这也意味着每次调用 recv 时，你只能接收到一个字节的带外数据。实际上，带外数据在TCP层面通常用作一个标记，提示接收端有紧急事件需要处理，而不是传递大量数据的渠道。

如果你需要传输多字节的“紧急数据”，你可能需要通过应用层协议来处理，而不是依赖于TCP的带外数据机制。